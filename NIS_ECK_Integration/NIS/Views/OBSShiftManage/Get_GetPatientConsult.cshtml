@using NIS.Data;
@{
    List<Consultation> PatientConsultionList = new List<Consultation>();
    if (ViewData["PatientConsultionInfo"] != null)
    {
        PatientConsultionList = (List<Consultation>)ViewData["PatientConsultionInfo"];
    }

}
<style>
    #ERConsultation td {
        text-align: left;
        padding: 5px;
    }

    #ConsultationContent table {
        margin-left: auto;
        margin-right: auto;
        /*border-collapse: collapse;*/
    }
    th {
        background-color:#85A5CC;
    }
</style>
<script type="text/javascript">
    $(document).ready(function () {
        setGridColor();        
    });
    function setGridColor() {
        //格行換色
        $('#ConsultationList tr:odd').css('background', '#ABC8E2');
        $('#ConsultationList tr:even').css('background', '#E1E6FA');
    }
</script>
<div id="ConsultationList" style="text-align:center;">
    <table style="border:2px solid;text-align:center;width:100%;margin-top:30px;">
        <tr>
            <th>申請日期時間</th>
            <th>類別</th>
            <th>診別</th>
            <th>科別</th>
            <th>指定醫師</th>
            <th>執行狀態</th>
            <th>輸入人</th>
            <th>申請醫師</th>
            <th>申請科別</th>
        </tr>
        @{
            if (PatientConsultionList.Count > 0)
            {
                for (int i = 0; i < PatientConsultionList.Count; i++)
                {
                    <tr onclick="$('[id^=ConsultationContent]').hide();$('#ConsultationContent@(i)').show();">
                        <td>@PatientConsultionList[i].OrderDate.ToString()</td>
                        <td>@PatientConsultionList[i].ConsultFlag.ToString()</td>
                        <td>@PatientConsultionList[i].Cateory.ToString()</td>
                        <td>@PatientConsultionList[i].NoteDept.ToString()</td>
                        <td>@PatientConsultionList[i].NoteDoc.ToString()</td>
                        <td>@PatientConsultionList[i].Status.ToString()</td>
                        <td>@PatientConsultionList[i].EnterName.ToString()</td>
                        <td>@PatientConsultionList[i].ApplicationDoc.ToString()</td>
                        <td>@PatientConsultionList[i].ConsDept.ToString()</td>
                    </tr>
                }
            }
        }
    </table>
</div>
@{
    if (PatientConsultionList.Count > 0)
    {
        for (int i = 0; i < PatientConsultionList.Count; i++)
        {
            <table id="ConsultationContent@(i)" style="display:none;text-align:left;margin-left:40px;margin-top:20px;">
                <tr>
                    <td>1. Referred By：申請醫師：@PatientConsultionList[i].ApplicationDoc.ToString()</td>
                    <td>申請時間：@PatientConsultionList[i].OrderDate.ToString()</td>
                </tr>
                <tr>
                    <td>2. Refer to：科別：@PatientConsultionList[i].NoteDept.ToString()</td>
                    <td>醫師：@PatientConsultionList[i].NoteDoc.ToString()</td>
                </tr>
                <tr>
                    <td colspan="2">
                        3. Clinical Summery：
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        @PatientConsultionList[i].Summery.ToString()
                    </td>
                </tr>
                <tr>
                    <td>4. Consult Result：會診醫師：@PatientConsultionList[i].ConsDoc.ToString()</td>
                    <td>會診時間：@PatientConsultionList[i].ReplyTime.ToString()</td>
                </tr>
                <tr>
                    <td colspan="2">@PatientConsultionList[i].ConsContent.ToString()</td>
                </tr>
            </table>
        }
    }
}
