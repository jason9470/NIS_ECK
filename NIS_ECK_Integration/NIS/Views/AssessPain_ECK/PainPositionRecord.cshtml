@using NIS.Data;
@{
    //日期選擇器，鎖定時間
    NIS.Data.PatientInfo pf = (NIS.Data.PatientInfo)Session["PatInfo"];
    NIS.Data.Complement_List complement_List = (NIS.Data.Complement_List)Session["Complement_List"];

    List<SelectListItem> PainAbnormalList = (List<SelectListItem>)ViewData["PainAbnormalList"];
    List<SysParamItem> RelievePainMed = (List<SysParamItem>)ViewData["RelievePainMed"];
    List<SysParamItem> RelievePainSideEffect = (List<SysParamItem>)ViewData["RelievePainSideEffect"];
    NIS.Data.PatientInfo ptinof = (NIS.Data.PatientInfo)ViewData["ptinfo"];
    int ptAge = ptinof.Age;
    int ptMon = ptinof.Month;
    //判斷 Coma Scale
    string TitleCont_M = "", TitleCont_E = "", TitleCont_V = "", ComaScaleItem_M = "", ComaScaleItem_E = "", ComaScaleItem_V = "";
    switch(ptAge)
    {//這裡用 \n 才可以換行，直接在 title 裡放入 &#10; 才可以換行
        case 0:
        //if(0 <= ptMon && ptMon < 6)
        //{
        //    TitleCont_E = "0-6月: \n 自行睜眼　4分 \n 聽到聲音　3分 \n 痛刺激　　2分 \n 無反應　　1分 \n 無法睜眼　　C";  //E 註解文字
        //    TitleCont_V = "0-6月: \n 發出聲音　3分 \n 會哭　　　2分 \n 無反應　　1分 \n 氣切管          T \n 失語症          A \n 氣管內管       E";  //V 註解文字
        //    TitleCont_M = "0-6月: \n 肢體屈曲　3分 \n 肢體伸張　2分 \n 無反應　　1分";  //M 註解文字
        //    ComaScaleItem_E = "4|3|2|1|C";  //E 項目
        //    ComaScaleItem_V = "3|2|1|T|A|E";  //V 項目
        //    ComaScaleItem_M = "3|2|1";  //M 項目
        //}
        //else
        //{
        //    TitleCont_E = "6-12月: \n 自行睜眼　4分 \n 聽到聲音　3分 \n 痛刺激　　2分 \n 無反應　　1分 \n 無法睜眼　　C";  //E 註解文字
        //    TitleCont_V = "6-12月: \n 發出聲音　3分 \n 會哭　　　2分 \n 無反應　　1分 \n 氣切管          T \n 失語症          A \n 氣管內管       E";  //V 註解文字
        //    TitleCont_M = "6-12月: \n 對痛反應良好　　5分 \n 對痛可稍許活動 　4分 \n 對痛呈肢體屈曲　3分 \n 對痛呈肢體伸張　2分 \n 無反應　　1分";  //M 註解文字
        //    ComaScaleItem_E = "4|3|2|1|C";  //E 項目
        //    ComaScaleItem_V = "3|2|1|T|A|E";  //V 項目
        //    ComaScaleItem_M = "5|4|3|2|1";  //M 項目
        //}
        //break;
        case 1:
        //TitleCont_E = "1歲-2歲: \n 自行睜眼　4分 \n 聽到聲音　3分 \n 痛刺激　　2分 \n 無反應　　1分 \n 無法睜眼　　C";  //E 註解文字
        //TitleCont_V = "1歲-2歲: \n 可說話　　4分 \n 發出聲音　3分 \n 會哭　　　2分 \n 無反應　　1分 \n 氣切管          T \n 失語症          A \n 氣管內管       E";  //V 註解文字
        //TitleCont_M = "1歲-2歲: \n 對痛反應良好　　5分 \n 對痛可稍許活動　4分 \n 對痛呈肢體屈曲　3分 \n 對痛呈肢體伸張　2分 \n 無反應 　　1分";  //M 註解文字
        //ComaScaleItem_E = "4|3|2|1|C";  //E 項目
        //ComaScaleItem_V = "4|3|2|1|T|A|E";  //V 項目
        //ComaScaleItem_M = "5|4|3|2|1";  //M 項目
        //break;
        case 2:
            TitleCont_E = "2歲以下: \n 自動　4分 \n 語言指揮　3分 \n 對痛刺激　　2分 \n 無反應　　1分 \n 無法睜眼　　C";  //E 註解文字
            TitleCont_V = "2歲以下: \n 笑、傾聽　　5分  \n 哭泣但可安撫　　4分 \n 不當且持續性哭泣，偶可安撫　3分 \n 躁動不安，無法安撫　　　2分 \n 無反應　　1分 \n 氣切管          T \n 失語症          A \n 氣管內管       E";  //V 註解文字
            TitleCont_M = "2歲以下: \n 正常自然活動　　6分 \n 對輕觸有收縮反應　　5分 \n 對痛覺有收縮反應　4分 \n 去大腦皮質收縮　3分 \n 去大腦伸張　2分 \n 無反應 　　1分";  //M 註解文字
            ComaScaleItem_E = "4|3|2|1|C";  //E 項目
            ComaScaleItem_V = "5|4|3|2|1|T|A|E";  //V 項目
            ComaScaleItem_M = "6|5|4|3|2|1";  //M 項目
            break;
        case 3:
        case 4:
        //TitleCont_E = "2-5歲: \n 自行睜眼　4分 \n 聽到聲音　3分 \n 痛刺激　　2分 \n 無反應　　1分 \n 無法睜眼　　C";  //E 註解文字
        //TitleCont_V = "2-5歲: \n 可說話　　4分 \n 發出聲音　3分 \n 會哭　　　2分 \n 無反應　　1分 \n 氣切管          T \n 失語症          A \n 氣管內管       E";  //V 註解文字
        //TitleCont_M = "2-5歲: \n 活動可依指令而行　6分 \n 對痛反應良好　　　5分 \n 對痛可稍許活動　　4分 \n 對痛呈肢體屈曲　　3分 \n 對痛呈肢體伸張　　2分 \n 無反應　　1分";  //M 註解文字
        //ComaScaleItem_E = "4|3|2|1|C";  //E 項目
        //ComaScaleItem_V = "4|3|2|1|T|A|E";  //V 項目
        //ComaScaleItem_M = "6|5|4|3|2|1";  //M 項目
        //break;
        default:
            if(ptAge >= 18)
            {
                TitleCont_E = "EYES Open \n\n 4分:Spontaneous \n 3分:tospeech \n 2分:topain \n 1分:none \n c:無法睜眼";  //E 註解文字
                TitleCont_V = "Best Verbal Response \n\n 5分:Alert \n 4分:Confused \n 3分:Drowsy \n 2分:Groans \n 1分:None \n T:Trachea \n A:Aphasia \n E:Endo";  //V 註解文字
                TitleCont_M = "Best Motor Response \n\n 6分:Obeys \n 5分:Localized pain \n 4分:Withdrawal \n 3分:Ab, flexion \n 2分:Extension \n 1分:None";  //M 註解文字
                ComaScaleItem_E = "4|3|2|1|C";  //E 項目
                ComaScaleItem_V = "5|4|3|2|1|T|A|E";  //V 項目
                ComaScaleItem_M = "6|5|4|3|2|1";  //M 項目
                break;
            }
            else
            {
                TitleCont_E = "2歲以上: \n 自動　4分 \n 語音指揮　3分 \n 對痛刺激　　2分 \n 無反應　　1分 \n 無法睜眼　　C";  //E 註解文字
                TitleCont_V = "2歲以上: \n 表達適當，具定向感　　5分 \n 混亂，迷糊不清　　4分 \n 表達不適當　3分 \n 說話含糊不清　　　2分 \n 無反應　　1分 \n 氣切管          T \n 失語症          A \n 氣管內管       E";  //V 註解文字 
                TitleCont_M = "2歲以上: \n 聽從指揮　6分 \n 痛覺定位　　　5分 \n 收縮反應　　4分 \n 去大腦皮質收縮　　3分 \n 去大腦伸張　　2分 \n 無反應　　1分";  //M 註解文字
                ComaScaleItem_E = "4|3|2|1|C";  //E 項目
                ComaScaleItem_V = "5|4|3|2|1|T|A|E";  //V 項目
                ComaScaleItem_M = "6|5|4|3|2|1";  //M 項目
                break;
            }
    }

}

<style type="text/css">
    .DivItem {
        display: inline-block;
        width: 16%;
    }
    .DivItem_L {
        display: inline-block;
        width: 31%;
    }
    .DivItem_SL {
        display: inline-block;
        width: 49%;
    }

    #PainRecord label, #PainRecord input[type=checkbox], #PainRecord input[type=radio] {
        cursor: pointer;
    }
    .AlertTitle {
        background-color: #85A5CC;
        font-weight:bold;
    }
</style>

<div style="text-align:center;">
    <input type="button" value="儲存" class="btn-sm" onclick="ToSave();" />
    <input type="button" value="放棄" class="btn-sm" onclick="Back();" />
</div>
<div class="dataArea" id="PainRecordContent" style="margin-top:10px;">
    <input type="hidden" id="PainCode" />
    <input type="hidden" id="PainRecordCode" />
    <table border="0" cellpadding="4" cellspacing="1" style="width:100%;">
        <tr>
            <th class="AlertTitle" style="width:20%;">評估日期時間</th>
            <td @*colspan="1"*@ style="width:20%;">
                <input type="text" id="ReocordDate" name="ReocordDate" value="@DateTime.Now.ToString("yyyy/MM/dd")" />
                <input type="text" id="ReocordTime" name="ReocordTime" value="@DateTime.Now.ToString("HH:mm")" />
                @WebTool.complementList_Status(complement_List.Status, pf.InDate.ToString("MM/dd/yyyy HH:mm"), @DateTime.Now.ToString("yyyy/MM/dd"), "ReocordDate", "ReocordTime", true)
            </td>
            <th class="AlertTitle" style="width:20%;">疼痛部位</th>
            <td @*colspan="1"*@ style="width:40%;">
                <label style="font-weight:bold;">@(ViewBag.PainPosition)</label>
            </td>
        </tr>
        <tr>
            <th class="AlertTitle">目前意識狀態<br />(conscious level)</th>
            <td colspan="3">
                <label><input type="radio" class="req_ck" name="ConsciosLevel" value="清醒" />清醒</label>
                <label><input type="radio" name="ConsciosLevel" value="嗜睡" />嗜睡</label>
                <label><input type="radio" name="ConsciosLevel" value="半昏迷" />半昏迷</label>
                <label><input type="radio" name="ConsciosLevel" value="昏迷" />昏迷</label>
                <label><input type="radio" name="ConsciosLevel" value="木僵" />木僵</label>
            </td>
        </tr>
        <tr>
            <th rowspan="3" class="AlertTitle">
                昏迷指數
                <br /><input type="button" class="btn-sm" value="帶入" onclick="SelectGCS();" />
            </th>
            <td colspan="3">
                <a style="text-decoration: none; color: blue;font-size:14px;" href="javascript:void(0);" class="tooltip" title="@(TitleCont_E)">
                       <img src="~/Images/med_dictionary.png" class="medbook" border="0" /> 睜眼反射(E)：
                </a>
               @* <span class="CLSpanFixedWidth3">
                        @Shared_Helper.list_shared_radio("GCS_E", ComaScaleItem_E, "", "")
                </span>*@
                 @for(int i = 0; i < ComaScaleItem_E.Trim('|').Split('|').Length; i++) 
                {
                    string TempClass="";
                    string[] Item_E= ComaScaleItem_E.Trim('|').Split('|');
                    if(i == 0) { TempClass = "req_ck"; }
                  @Html.Raw("<label><input type='radio' class='"+TempClass+"' name='GCS_E' value='"+Item_E[i]+"' />"+Item_E[i]+"</label>")
                }
             </td>
        </tr>
        <tr>
            <td colspan="3">
                <a style="text-decoration: none; color: blue;font-size:14px;" href="javascript:void(0);" class="tooltip" title="@(TitleCont_V)">
                        <img src="~/Images/med_dictionary.png" class="medbook" border="0" /> 語言反射(V)：
                </a>
               @* <span class="CLSpanFixedWidth3">
                         @Shared_Helper.list_shared_radio("GCS_V", ComaScaleItem_V, "", "")
                </span>*@
                @for(int i = 0; i < ComaScaleItem_V.Trim('|').Split('|').Length; i++) 
                {
                    string TempClass="";
                    string[] Item_V= ComaScaleItem_V.Trim('|').Split('|');
                    if(i == 0) { TempClass = "req_ck"; }
                  @Html.Raw("<label><input type='radio' class='"+TempClass+"' name='GCS_V' value='"+Item_V[i]+"' />"+Item_V[i]+"</label>")
                }
            </td>
        </tr>
        <tr>
            <td colspan="3">
                <a style="text-decoration: none; color: blue;font-size:14px;" href="javascript:void(0);" class="tooltip" title="@(TitleCont_M)">
                       <img src="~/Images/med_dictionary.png" class="medbook" border="0" /> 運動反射(M)：
                </a>
               @* <span class="CLSpanFixedWidth3">
                       @Shared_Helper.list_shared_radio("GCS_M", ComaScaleItem_M, "", "")
                </span>*@
                @for(int i = 0; i < ComaScaleItem_M.Trim('|').Split('|').Length; i++) 
                {
                    string TempClass="";
                    string[] Item_M= ComaScaleItem_M.Trim('|').Split('|');
                    if(i == 0) { TempClass = "req_ck"; }
                  @Html.Raw("<label><input type='radio' class='"+TempClass+"' name='GCS_M' value='"+Item_M[i]+"' />"+Item_M[i]+"</label>")
                }
            </td>
        </tr>




        <tr>
            <th class="AlertTitle">疼痛強度(Pain level)</th>
            <td style="width:20%;">
                <label><input type="radio" class="req_ck" name="PainLevel" value="數字量表" data-target="Number" onclick="SwitchPainLevel(this);" />數字量表</label><br />
                <label><input type="radio" name="PainLevel" value="臉譜量表" data-target="Face" onclick="SwitchPainLevel(this);" />臉譜量表</label><br />
                <label><input type="radio" name="PainLevel" value="困難評估(成人)" data-target="Adult" onclick="SwitchPainLevel(this);" />困難評估(成人)</label><br />
                <label><input type="radio" name="PainLevel" value="困難評估(兒童)" data-target="Child" onclick="SwitchPainLevel(this);" />困難評估(兒童)</label><br />
                <label><input type="radio" name="PainLevel" value="困難評估(新生兒)" data-target="Baby" onclick="SwitchPainLevel(this);" />困難評估(新生兒)</label><br />
                <label><input type="radio" name="PainLevel" value="CPOT評估(加護單位)" data-target="CPOT" onclick="SwitchPainLevel(this);" />CPOT評估(加護單位)</label>
            </td>
            <td style="width:65%;" colspan="2">
                <div class="PainLevel Number" style="display:none;">
                    <label><input type="radio" class="req_ck" name="PainLevel_Number" value="(0)" />(0)</label>
                    <label><input type="radio" name="PainLevel_Number" value="(1)" />(1)</label>
                    <label><input type="radio" name="PainLevel_Number" value="(2)" />(2)</label>
                    <label><input type="radio" name="PainLevel_Number" value="(3)" />(3)</label>
                    <label><input type="radio" name="PainLevel_Number" value="(4)" />(4)</label>
                    <label><input type="radio" name="PainLevel_Number" value="(5)" />(5)</label>
                    <label><input type="radio" name="PainLevel_Number" value="(6)" />(6)</label>
                    <label><input type="radio" name="PainLevel_Number" value="(7)" />(7)</label>
                    <label><input type="radio" name="PainLevel_Number" value="(8)" />(8)</label>
                    <label><input type="radio" name="PainLevel_Number" value="(9)" />(9)</label>
                    <label><input type="radio" name="PainLevel_Number" value="(10)" />(10)</label>
                </div>
                <div class="PainLevel Face" style="display:none;">
                    <div style="display:inline-block;width:49%;">
                        <img src="@Url.Content("~/Images/NumericalPainScale/ps_chart_up.png")" alt="" width="210" />
                        <div>
                            <label><input type="radio" class="req_ck" name="PainLevel_Face" value="(0)" />(0)</label>
                            <label><input type="radio" name="PainLevel_Face" value="(1)" />(1)</label>
                            <label><input type="radio" name="PainLevel_Face" value="(2)" />(2)</label>
                            <label><input type="radio" name="PainLevel_Face" value="(3)" />(3)</label>
                            <label><input type="radio" name="PainLevel_Face" value="(4)" />(4)</label>
                            <label><input type="radio" name="PainLevel_Face" value="(5)" />(5)</label>
                        </div>
                    </div>                                                              
                    <div style="display:inline-block;width:49%;">               
                        <img src="@Url.Content("~/Images/NumericalPainScale/ps_chart_down.png")" alt="" width="210"/>
                        <div>
                            <label><input type="radio" name="PainLevel_Face" value="(6)" />(6)</label>
                            <label><input type="radio" name="PainLevel_Face" value="(7)" />(7)</label>
                            <label><input type="radio" name="PainLevel_Face" value="(8)" />(8)</label>
                            <label><input type="radio" name="PainLevel_Face" value="(9)" />(9)</label>
                            <label><input type="radio" name="PainLevel_Face" value="(10)" />(10)</label>
                        </div>
                    </div>
                </div>
                <div class="PainLevel Adult" style="display:none;">
                    <div>
                        呼吸：<br />
                        <label><input type="radio" class="req_ck" name="PainLevel_Adult_Breath" value="(0)正常" />(0)正常</label><br />
                        <label><input type="radio" name="PainLevel_Adult_Breath" value="(1)略喘" />(1)略喘</label><br />
                        <label><input type="radio" name="PainLevel_Adult_Breath" value="(2)喘(有明顯呼吸音)/呼吸呈現陳施氏呼吸型態(Cheyne-Stokes respiration)" />(2)喘(有明顯呼吸音)/呼吸呈現陳施氏呼吸型態(Cheyne-Stokes respiration)</label>
                        <hr />
                    </div>
                    <div>
                        非言語表達：<br />
                        <label><input type="radio" class="req_ck" name="PainLevel_Adult_NoLG" value="(0)無" />(0)無</label><br />
                        <label><input type="radio" name="PainLevel_Adult_NoLG" value="(1)呻吟聲" />(1)呻吟聲</label><br />
                        <label><input type="radio" name="PainLevel_Adult_NoLG" value="(2)大聲呻吟/哭泣" />(2)大聲呻吟/哭泣</label>
                        <hr />
                    </div>
                    <div>
                        臉部表情：<br />
                        <label><input type="radio" class="req_ck" name="PainLevel_Adult_Face" value="(0)輕鬆自然" />(0)輕鬆自然</label><br />
                        <label><input type="radio" name="PainLevel_Adult_Face" value="(1)蹙眉/憂愁" />(1)蹙眉/憂愁</label><br />
                        <label><input type="radio" name="PainLevel_Adult_Face" value="(2)痛苦狀" />(2)痛苦狀</label>
                        <hr />
                    </div>
                    <div>
                        肢體語言：<br />
                        <label><input type="radio" class="req_ck" name="PainLevel_Adult_Body" value="(0)微笑/輕鬆" />(0)微笑/輕鬆</label><br />
                        <label><input type="radio" name="PainLevel_Adult_Body" value="(1)緊張" />(1)緊張</label><br />
                        <label><input type="radio" name="PainLevel_Adult_Body" value="(2)僵硬/咬緊牙關" />(2)僵硬/咬緊牙關</label>
                        <hr />
                    </div>
                    <div>
                        安撫：<br />
                        <label><input type="radio" class="req_ck" name="PainLevel_Adult_Appease" value="(0)不需要" />(0)不需要</label><br />
                        <label><input type="radio" name="PainLevel_Adult_Appease" value="(1)需要" />(1)需要</label><br />
                        <label><input type="radio" name="PainLevel_Adult_Appease" value="(2)無法安撫" />(2)無法安撫</label>
                    </div>
                </div>
                <div class="PainLevel Child" style="display:none;">
                    <div>
                        臉部表情:<br />
                        <label><input type="radio" class="req_ck" name="PainLevel_Child_Face" value="(0)沒有特別的表情或微笑" />(0)沒有特別的表情或微笑</label><br />
                        <label><input type="radio" name="PainLevel_Child_Face" value="(1)偶爾出現鬼臉、皺眉、退縮，或對週遭刺激缺乏興趣" />(1)偶爾出現鬼臉、皺眉、退縮，或對週遭刺激缺乏興趣</label><br />
                        <label><input type="radio" name="PainLevel_Child_Face" value="(2)下巴頻繁地顫抖或下巴緊閉" />(2)下巴頻繁地顫抖或下巴緊閉</label>
                        <hr />
                    </div>
                    <div>
                        腳部:<br />
                        <label><input type="radio" class="req_ck" name="PainLevel_Child_Legs" value="(0)正常位置肢體放鬆" />(0)正常位置肢體放鬆</label><br />
                        <label><input type="radio" name="PainLevel_Child_Legs" value="(1)不安、焦躁不安、緊張" />(1)不安、焦躁不安、緊張</label><br />
                        <label><input type="radio" name="PainLevel_Child_Legs" value="(2)拳打腳踢腿拉長伸直" />(2)拳打腳踢腿拉長伸直</label>
                        <hr />
                    </div>
                    <div>
                        活動力:<br />
                        <label><input type="radio" class="req_ck" name="PainLevel_Child_Activity" value="(0)平靜的躺臥、正常的擺位可以輕鬆移動" />(0)平靜的躺臥、正常的擺位可以輕鬆移動</label><br />
                        <label><input type="radio" name="PainLevel_Child_Activity" value="(1)扭動不安、前後翻滾身體緊張" />(1)扭動不安、前後翻滾身體緊張</label><br />
                        <label><input type="radio" name="PainLevel_Child_Activity" value="(2)身體拱起、僵硬、抽搐、痙攣" />(2)身體拱起、僵硬、抽搐、痙攣</label>
                        <hr />
                    </div>
                    <div>
                        哭泣:<br />
                        <label><input type="radio" class="req_ck" name="PainLevel_Child_Crying" value="(0)沒有哭泣(醒著或睡著)" />(0)沒有哭泣(醒著或睡著)</label><br />
                        <label><input type="radio" name="PainLevel_Child_Crying" value="(1)呻吟或哽咽偶而哭吵" />(1)呻吟或哽咽偶而哭吵</label><br />
                        <label><input type="radio" name="PainLevel_Child_Crying" value="(2)不斷哭吵、尖叫、啜泣" />(2)不斷哭吵、尖叫、啜泣</label>
                        <hr />
                    </div>
                    <div>
                        安撫:<br />
                        <label><input type="radio" class="req_ck" name="PainLevel_Child_Consolability" value="(0)滿足的、放鬆的" />(0)滿足的、放鬆的</label><br />
                        <label><input type="radio" name="PainLevel_Child_Consolability" value="(1)撫觸、擁抱、說話，或轉移注意，可稍加安撫" />(1)撫觸、擁抱、說話，或轉移注意，可稍加安撫</label><br />
                        <label><input type="radio" name="PainLevel_Child_Consolability" value="(2)難以安撫" />(2)難以安撫</label>
                    </div>
                </div>
                <div class="PainLevel Baby" style="display:none;">
                    <div>
                        哭泣:<br />
                        <label><input type="radio" class="req_ck" name="PainLevel_Baby_Crying" value="(0)無" />(0)無</label><br />
                        <label><input type="radio" name="PainLevel_Baby_Crying" value="(1)高音頻的哭泣聲/尚可被安撫" />(1)高音頻的哭泣聲/尚可被安撫</label><br />
                        <label><input type="radio" name="PainLevel_Baby_Crying" value="(2)傷心欲絕的高頻哭泣/無法被安撫" />(2)傷心欲絕的高頻哭泣/無法被安撫</label>
                        <hr />
                    </div>
                    <div>
                        需氧量；血氧飽合濃度高於95%:<br />
                        <label><input type="radio" class="req_ck" name="PainLevel_Baby_FiO2" value="(0)毋須使用氧氣" />(0)毋須使用氧氣</label><br />
                        <label><input type="radio" name="PainLevel_Baby_FiO2" value="(1)FiO2 < 30%" />(1)FiO2 < 30%</label><br />
                        <label><input type="radio" name="PainLevel_Baby_FiO2" value="(2)FiO2 > 30%" />(2)FiO2 > 30%</label>
                        <hr />
                    </div>
                    <div>
                        生命徵象:<br />
                        <label><input type="radio" class="req_ck" name="PainLevel_Baby_VT" value="(0)心跳速率及血壓 = 或 < 手術/侵入性治療前" />(0)心跳速率及血壓 = 或 < 手術/侵入性治療前</label><br />
                        <label><input type="radio" name="PainLevel_Baby_VT" value="(1)心跳速率或血壓較手術/侵入性治療前上升【增加<20%】" />(1)心跳速率或血壓較手術/侵入性治療前上升【增加<20%】</label><br />
                        <label><input type="radio" name="PainLevel_Baby_VT" value="(2)心跳速率或血壓較手術/侵入性治療前上升【增加>20%】" />(2)心跳速率或血壓較手術/侵入性治療前上升【增加>20%】</label>
                        <hr />
                    </div>
                    <div>
                        表情:<br />
                        <label><input type="radio" class="req_ck" name="PainLevel_Baby_Expression" value="(0)平靜，無特殊表情變化" />(0)平靜，無特殊表情變化</label><br />
                        <label><input type="radio" name="PainLevel_Baby_Expression" value="(1)表情扭曲、作鬼臉" />(1)表情扭曲、作鬼臉</label><br />
                        <label><input type="radio" name="PainLevel_Baby_Expression" value="(2)表情極度痛苦，出現呻吟聲" />(2)表情極度痛苦，出現呻吟聲</label>
                        <hr />
                    </div>
                    <div>
                        睡眠狀態:<br />
                        <label><input type="radio" class="req_ck" name="PainLevel_Baby_Sleepless" value="(0)安睡" />(0)安睡</label><br />
                        <label><input type="radio" name="PainLevel_Baby_Sleepless" value="(1)經常醒來" />(1)經常醒來</label><br />
                        <label><input type="radio" name="PainLevel_Baby_Sleepless" value="(2)無法入眠" />(2)無法入眠</label>
                        <hr />
                    </div>
                </div>
                <div class="PainLevel CPOT" style="display:none;">
                    <div>
                        臉部表情：<br />
                        <label><input type="radio" class="req_ck" name="PainLevel_CPOT_Face" value="(0)未見面部肌肉緊張" />(0)未見面部肌肉緊張</label><br />
                        <label><input type="radio" name="PainLevel_CPOT_Face" value="(1)表現為皺眉，面部肌肉緊張" />(1)表現為皺眉，面部肌肉緊張</label><br />
                        <label><input type="radio" name="PainLevel_CPOT_Face" value="(2)出現以上所有表情並雙眼緊閉" />(2)出現以上所有表情並雙眼緊閉</label>
                        <hr />
                    </div>
                    <div>
                        身體動作：<br />
                        <label><input type="radio" class="req_ck" name="PainLevel_CPOT_Body" value="(0)安靜，無運動（不一定表示無疼痛）" />(0)安靜，無運動（不一定表示無疼痛）</label><br />
                        <label><input type="radio" name="PainLevel_CPOT_Body" value="(1)緩慢小心地移動，輕撫痛處，通過移動身體引起別人的注意" />(1)緩慢小心地移動，輕撫痛處，通過移動身體引起別人的注意</label><br />
                        <label><input type="radio" name="PainLevel_CPOT_Body" value="(2)拉扯氣管插管，試圖坐起，在床上翻來覆去，不配合指示，襲擊工作人員，試圖翻越床欄" />(2)拉扯氣管插管，試圖坐起，在床上翻來覆去，不配合指示，襲擊工作人員，試圖翻越床欄</label>
                        <hr />
                    </div>
                    <div>
                        肌肉緊張：<br />
                        <label><input type="radio" class="req_ck" name="PainLevel_CPOT_Muscle" value="(0)被動運動時無阻力" />(0)被動運動時無阻力</label><br />
                        <label><input type="radio" name="PainLevel_CPOT_Muscle" value="(1)被動運動時有阻力" />(1)被動運動時有阻力</label><br />
                        <label><input type="radio" name="PainLevel_CPOT_Muscle" value="(2)被動運動時阻力非常大，無法完成動作" />(2)被動運動時阻力非常大，無法完成動作</label>
                        <hr />
                    </div>
                    <div>
                        呼吸器：<br />
                        <label><input type="radio" class="req_ck" name="PainLevel_CPOT_Breath" value="(0)無呼吸器說話時語調平穩或不出聲" />(0)無呼吸器說話時語調平穩或不出聲</label><br />
                        <label><input type="radio" name="PainLevel_CPOT_Breath" value="(1)無呼吸器嘆息、呻吟" />(1)無呼吸器嘆息、呻吟</label><br />
                        <label><input type="radio" name="PainLevel_CPOT_Breath" value="(2)無呼吸器哭喊、抽泣" />(2)無呼吸器哭喊、抽泣</label><br />
                        <label><input type="radio" name="PainLevel_CPOT_Breath" value="(0)有呼吸器通氣順暢，無呼吸機報警" />(0)有呼吸器通氣順暢，無呼吸機報警</label><br />
                        <label><input type="radio" name="PainLevel_CPOT_Breath" value="(1)有呼吸器嗆咳，呼吸機報警觸發，疼痛時自主呼吸暫停" />(1)有呼吸器嗆咳，呼吸機報警觸發，疼痛時自主呼吸暫停</label><br />
                        <label><input type="radio" name="PainLevel_CPOT_Breath" value="(2)有呼吸器人機不同步，呼吸機頻繁報警" />(2)有呼吸器人機不同步，呼吸機頻繁報警</label>
                        <hr />
                    </div>
                </div>
            </td>
        </tr>
        @*<tr>
            <th>疼痛部位</th>
            <td colspan="2">
                <label>@(ViewBag.PainPosition)</label>
            </td>
        </tr>*@
        <tr>
            <th class="AlertTitle">疼痛性質</th>
            <td colspan="3">
                <div class="DivItem"><label><input type="checkbox" name="PainNature" value="無法評估" />無法評估</label></div>
                <div class="DivItem"><label><input type="checkbox" class="req_ck" name="PainNature" value="刺痛" />刺痛</label></div>
                <div class="DivItem"><label><input type="checkbox" name="PainNature" value="刀割痛" />刀割痛</label></div>
                <div class="DivItem"><label><input type="checkbox" name="PainNature" value="鈍痛" />鈍痛</label></div>
                <div class="DivItem"><label><input type="checkbox" name="PainNature" value="悶痛" />悶痛</label></div>
                <div class="DivItem"><label><input type="checkbox" name="PainNature" value="抽痛" />抽痛</label></div>
                <div class="DivItem"><label><input type="checkbox" name="PainNature" value="壓痛" />壓痛</label></div>
                <div class="DivItem"><label><input type="checkbox" name="PainNature" value="燒灼痛" />燒灼痛</label></div>
                <div class="DivItem"><label><input type="checkbox" name="PainNature" value="感覺異常痛" />感覺異常痛</label></div>
                <div class="DivItem"><label><input type="checkbox" name="PainNature" value="戳痛" />戳痛</label></div>
                <div class="DivItem"><label><input type="checkbox" name="PainNature" value="脹痛" />脹痛</label></div>
                <div class="DivItem"><label><input type="checkbox" name="PainNature" value="臟器痛" />臟器痛</label></div>              
                <div>
                    <label><input type="checkbox" name="PainNature" onclick="SwitchSubProject(this);" value="其他" />其他</label>
                    <span class="PainNature" style="display:none;">
                        <input type="text" class="req_txt" name="PainNature_Other" disabled="disabled" />
                    </span>
                </div>
            </td>
        </tr>
        <tr>
            <th class="AlertTitle">是否使用止痛藥</th>
            <td colspan="3">
                <label><input type="radio" class="req_ck" name="PainKiller" value="是" data-target="Y" onclick="SwitchSubProject(this);" />是</label>
                <label><input type="radio" name="PainKiller" value="否" onclick="SwitchSubProject(this);" />否</label>
                <label><input type="radio" name="PainKiller" value="給藥後評估" onclick="SwitchSubProject(this);" />給藥後評估</label>
            </td>
        </tr>
        <tr class="PainKiller" style="display:none;">
            <td ></td>
            <td colspan="3">
                <div style="text-align:center;"><label style="font-weight:bold;">止痛藥物</label><hr /></div>
                <input type="button" class="btn-m" value="開啟給藥作業" onclick="openMed();" />
                <br>
                @using (var item = RelievePainMed.GetEnumerator())
                {
                    if (item.MoveNext())
                    {
                        <div style="display:none" class="DivItem_SL"><label><input type="checkbox" class="req_ck" name="RelievePainMedItem" value="@item.Current.p_id" onclick="SwitchSubProject_('#PainRecordContent #' + $(this).val(), $(this).prop('checked'));" />@item.Current.p_name</label></div>
                        while (item.MoveNext())
                        {
                            <div style="display:none" class="DivItem_SL"><label><input type="checkbox" name="RelievePainMedItem" value="@item.Current.p_id" onclick="SwitchSubProject_('#PainRecordContent #' + $(this).val(), $(this).prop('checked'));" />@item.Current.p_name</label></div>
                        }
                    }
                }
                <br>
                其他：<input type="text" class="req_txt" style="width:90%" name="Txt_RelievePainMedItem_other" />

            </td>
        </tr>
        <tr class="PainKiller" style="display:none;">
            <td ></td>
            <td colspan="3">
                <div style="text-align:center;">
                <table style="width:100%">
                    <tr>
                        <td style="width: 60.5%;"><label style="font-weight: bold;">藥名</label></td>
                        <td style="width: 85px; "><label style="font-weight: bold; ">劑量</label></td>
                        <td ><label style="font-weight: bold; ">途徑</label></td>
                    @*</tr>*@
                </table>
                <hr /></div>
                <div id="med">
                        @foreach(SysParamItem item in RelievePainMed)
                        {
                            <div id="@item.p_id" style="display:none;">
                                <input type="text" class="req_txt still" name="RelievePainMedItem_Name_@(item.p_id)" value="@item.p_name" style="width:60%;" readonly="readonly" />
                                <input type="text" class="req_txt" name="RelievePainMedItem_Amount_@(item.p_id)" style="width:80px;" />
                                <select name="RelievePainMedItem_Way_@(item.p_id)" class="req_txt">
                                    @foreach(string way in item.p_memo.Split(','))
                                    {
                                    <option value="@way">@way</option>
                                    }
                                </select>
                            </div>
                        }
                </div>
            </td>
        </tr>
        <tr class="PainKiller" style="display:none;">
            <td></td>
            @*<td style="font-weight:bold;text-align:center;">副作用</td>*@
            <td colspan="3">
                <div style="text-align:center;"><label style="font-weight:bold;">副作用</label><hr /></div>
                <div>
                @using(var item = RelievePainSideEffect.GetEnumerator())
                {
                    if(item.MoveNext())
                    {
                        <div class="DivItem_L"><label><input type="checkbox" class="req_ck" name="RelievePainSideEffectItem" value="@item.Current.p_value" />@item.Current.p_name</label></div>
                        while(item.MoveNext())
                        {
                            if(!item.Current.p_name.Equals("其他"))
                            {
                        <div class="DivItem_L"><label><input type="checkbox" name="RelievePainSideEffectItem" value="@item.Current.p_value" />@item.Current.p_name</label></div>
                            }
                            else
                            {
                        <div class="DivItem_L">
                            <label><input type="checkbox" name="RelievePainSideEffectItem" value="@item.Current.p_value" onclick="SwitchSubProject(this);" />@item.Current.p_name</label>
                            <span class="RelievePainSideEffectItem" style="display:none;">
                                <input type="text" class="req_txt" name="RelievePainSideEffectItem_Other" disabled="disabled" />
                            </span>
                        </div>
                            }
                        }
                    }
                }
                @foreach(SysParamItem item in RelievePainSideEffect)
                {
                }
                    </div>
                
            </td>
        </tr>
        <tr>
            <th class="AlertTitle">非藥物護理處置</th>
            <td colspan="3">
                @foreach(SelectListItem item in PainAbnormalList)
                {
                    if(!item.Text.Equals("其他"))
                    {
                <div class="DivItem_L"><label><input type="checkbox" name="PainAbnormalItem" value="@item.Value" />@item.Text</label></div>
                    }
                    else
                    {
                <div class="DivItem_L">
                    <label><input type="checkbox" name="PainAbnormalItem" value="@item.Value" onclick="SwitchSubProject(this);" />@item.Text</label>
                    <span class="PainAbnormalItem" style="display:none;">
                        <input type="text" class="req_txt" name="PainAbnormalItem_Other" disabled="disabled" />
                    </span>
                </div>
                    }
                }
            </td>
        </tr>
        <tr>
            <th class="AlertTitle">靈性評估</th>
            <td colspan="3">
                <label><input type="radio" class="req_ck" name="SpiritualityAssess" value="需要" data-Last="Y" data-target="Y" onclick="SwitchSubProject(this);" />需要</label>
                <label><input type="radio" name="SpiritualityAssess" value="不需要" onclick="SwitchSubProject(this);" />不需要</label>
            </td>
        </tr>
        <tr class="SpiritualityAssess" style="display:none;">
            <td rowspan="6" style="text-align:center;" class="AlertTitle">心情溫度計</td>
            <td style="text-align:center;" >感覺緊張不安</td>
            <td colspan="2">
                <label><input type="radio" class="req_ck" data-Last="Y" name="Mood_Thermometer_Q1" value="(0)完全沒有" onclick="MoodScore();" />(0)完全沒有</label>
                <label><input type="radio" name="Mood_Thermometer_Q1" value="(1)輕微" onclick="MoodScore();" />(1)輕微</label>
                <label><input type="radio" name="Mood_Thermometer_Q1" value="(2)中等程度" onclick="MoodScore();" />(2)中等程度</label>
                <label><input type="radio" name="Mood_Thermometer_Q1" value="(3)厲害" onclick="MoodScore();" />(3)厲害</label>
                <label><input type="radio" name="Mood_Thermometer_Q1" value="(4)非常厲害" onclick="MoodScore();" />(4)非常厲害</label>
            </td>
        </tr>
        <tr class="SpiritualityAssess" style="display:none;">
            <td style="text-align:center;" >感覺憂鬱、心情低落</td>
            <td colspan="2">
                <label><input type="radio" class="req_ck" data-Last="Y" name="Mood_Thermometer_Q2" value="(0)完全沒有" onclick="MoodScore();" />(0)完全沒有</label>
                <label><input type="radio" name="Mood_Thermometer_Q2" value="(1)輕微" onclick="MoodScore();" />(1)輕微</label>
                <label><input type="radio" name="Mood_Thermometer_Q2" value="(2)中等程度" onclick="MoodScore();" />(2)中等程度</label>
                <label><input type="radio" name="Mood_Thermometer_Q2" value="(3)厲害" onclick="MoodScore();" />(3)厲害</label>
                <label><input type="radio" name="Mood_Thermometer_Q2" value="(4)非常厲害" onclick="MoodScore();" />(4)非常厲害</label>
            </td>
        </tr>
        <tr class="SpiritualityAssess" style="display:none;">
            <td style="text-align:center;" >覺得容易苦惱或動怒</td>
            <td colspan="2">
                <label><input type="radio" class="req_ck" data-Last="Y" name="Mood_Thermometer_Q3" value="(0)完全沒有" onclick="MoodScore();" />(0)完全沒有</label>
                <label><input type="radio" name="Mood_Thermometer_Q3" value="(1)輕微" onclick="MoodScore();" />(1)輕微</label>
                <label><input type="radio" name="Mood_Thermometer_Q3" value="(2)中等程度" onclick="MoodScore();" />(2)中等程度</label>
                <label><input type="radio" name="Mood_Thermometer_Q3" value="(3)厲害" onclick="MoodScore();" />(3)厲害</label>
                <label><input type="radio" name="Mood_Thermometer_Q3" value="(4)非常厲害" onclick="MoodScore();" />(4)非常厲害</label>
            </td>
        </tr>
        <tr class="SpiritualityAssess" style="display:none;">
            <td style="text-align:center;" >覺得比不上別人</td>
            <td colspan="2">
                <label><input type="radio" class="req_ck" data-Last="Y" name="Mood_Thermometer_Q4" value="(0)完全沒有" onclick="MoodScore();" />(0)完全沒有</label>
                <label><input type="radio" name="Mood_Thermometer_Q4" value="(1)輕微" onclick="MoodScore();" />(1)輕微</label>
                <label><input type="radio" name="Mood_Thermometer_Q4" value="(2)中等程度" onclick="MoodScore();" />(2)中等程度</label>
                <label><input type="radio" name="Mood_Thermometer_Q4" value="(3)厲害" onclick="MoodScore();" />(3)厲害</label>
                <label><input type="radio" name="Mood_Thermometer_Q4" value="(4)非常厲害" onclick="MoodScore();" />(4)非常厲害</label>
            </td>
        </tr>
        <tr class="SpiritualityAssess" style="display:none;">
            <td style="text-align:center;" >睡眠困難。譬如難以入睡、易睡或早醒</td>
            <td colspan="2">
                <label><input type="radio" class="req_ck" data-Last="Y" name="Mood_Thermometer_Q5" value="(0)完全沒有" onclick="MoodScore();" />(0)完全沒有</label>
                <label><input type="radio" name="Mood_Thermometer_Q5" value="(1)輕微" onclick="MoodScore();" />(1)輕微</label>
                <label><input type="radio" name="Mood_Thermometer_Q5" value="(2)中等程度" onclick="MoodScore();" />(2)中等程度</label>
                <label><input type="radio" name="Mood_Thermometer_Q5" value="(3)厲害" onclick="MoodScore();" />(3)厲害</label>
                <label><input type="radio" name="Mood_Thermometer_Q5" value="(4)非常厲害" onclick="MoodScore();" />(4)非常厲害</label>
            </td>
        </tr>
        <tr class="SpiritualityAssess" style="display:none;">
            <td style="text-align:center;">總分</td>
            <td colspan="2">
                @*<input type="text" name="Mood_Thermometer_Total" class="req_txt" readonly="readonly" style="width:100%;" />*@
                <label name="Mood_Thermometer_Total" class="req_lab"></label>
            </td>
        </tr>
        <tr class="SpiritualityAssess" style="display:none;">
            <td style="text-align:center;" class="AlertTitle">社會問題-病人</td>
            <td >
                <label><input type="radio" class="req_ck" name="Social_Issues_Patient" value="有" data-Last="Y" data-target="Y" onclick="SwitchSubProject(this);" />有</label>
                <label><input type="radio" name="Social_Issues_Patient" value="無" onclick="SwitchSubProject(this);" />無</label>
                <label><input type="radio" name="Social_Issues_Patient" value="無法評估" onclick="SwitchSubProject(this);" />無法評估</label>
            </td>
            <td colspan="2">
                <div class="Social_Issues_Patient" style="display:none">
                    <div class="DivItem_SL"><label><input type="checkbox" class="req_ck" data-Last="Y" name="Social_Issues_Patient_Y" value="情緒困擾" />情緒困擾</label></div>
                    <div class="DivItem_SL"><label><input type="checkbox" name="Social_Issues_Patient_Y" value="疾病認知與適應困難" />疾病認知與適應困難</label></div>
                    <div class="DivItem_SL"><label><input type="checkbox" name="Social_Issues_Patient_Y" value="家庭互相溝通問題" />家庭互相溝通問題</label></div>
                    <div class="DivItem_SL"><label><input type="checkbox" name="Social_Issues_Patient_Y" value="經濟資源支持系統缺乏" />經濟資源支持系統缺乏</label></div>
                    <div class="DivItem_SL"><label><input type="checkbox" name="Social_Issues_Patient_Y" value="心願未了與後事準備缺乏" />心願未了與後事準備缺乏</label></div>
                    <div class="DivItem_SL">
                        <label><input type="checkbox" name="Social_Issues_Patient_Y" value="其他" onclick="SwitchSubProject(this);" />其他</label>
                            <span class="Social_Issues_Patient_Y" style="display:none">
                                <input type="text" class="req_txt" data-Last="Y" name="Social_Issues_Patient_Y_Other" disabled="disabled" />
                            </span>
                    </div>
                </div>
            </td>
        </tr>
        <tr class="SpiritualityAssess" style="display:none;">
            <td style="text-align:center;" class="AlertTitle">社會問題-家屬</td>
            <td>
                <label><input type="radio" class="req_ck" name="Social_Issues_Family" value="有" data-Last="Y" data-target="Y" onclick="SwitchSubProject(this);" />有</label>
                <label><input type="radio" name="Social_Issues_Family" value="無" onclick="SwitchSubProject(this);" />無</label>
                <label><input type="radio" name="Social_Issues_Family" value="無法評估" onclick="SwitchSubProject(this);" />無法評估</label>
            </td>
            <td colspan="2">
                <div class="Social_Issues_Family" style="display:none">
                    <div class="DivItem_SL"><label><input type="checkbox" class="req_ck" data-Last="Y" name="Social_Issues_Family_Y" value="情緒困擾" />情緒困擾</label></div>
                    <div class="DivItem_SL"><label><input type="checkbox" name="Social_Issues_Family_Y" value="疾病認知與適應困難" />疾病認知與適應困難</label></div>
                    <div class="DivItem_SL"><label><input type="checkbox" name="Social_Issues_Family_Y" value="家庭互相溝通問題" />家庭互相溝通問題</label></div>
                    <div class="DivItem_SL"><label><input type="checkbox" name="Social_Issues_Family_Y" value="經濟資源支持系統缺乏" />經濟資源支持系統缺乏</label></div>
                    <div class="DivItem_SL"><label><input type="checkbox" name="Social_Issues_Family_Y" value="心願未了與後事準備缺乏" />心願未了與後事準備缺乏</label></div>
                    <div class="DivItem_SL">
                        <label><input type="checkbox" name="Social_Issues_Family_Y" value="其他" onclick="SwitchSubProject(this);" />其他</label>
                        <span class="Social_Issues_Family_Y" style="display:none">
                            <input type="text" class="req_txt" data-Last="Y" name="Social_Issues_Family_Y_Other" disabled="disabled" />
                        </span>
                    </div>
                </div>
            </td>
        </tr>
        <tr class="SpiritualityAssess" style="display:none;">
            <td style="text-align:center;" class="AlertTitle">靈性宗教問題-病人</td>
            <td>
                <label><input type="radio" class="req_ck" name="Spirituality_eligion_Patient" value="有" data-Last="Y" data-target="Y" onclick="SwitchSubProject(this);" />有</label>
                <label><input type="radio" name="Spirituality_eligion_Patient" value="無" onclick="SwitchSubProject(this);" />無</label>
                <label><input type="radio" name="Spirituality_eligion_Patient" value="無法評估" onclick="SwitchSubProject(this);" />無法評估</label>
            </td>
            <td colspan="2">
                <div class="Spirituality_eligion_Patient" style="display:none">
                    <div class="DivItem_SL"><label><input type="checkbox" data-Last="Y" class="req_ck" name="Spirituality_eligion_Patient_Y" value="存在的孤獨隔絕感" />存在的孤獨隔絕感</label></div>
                    <div class="DivItem_SL"><label><input type="checkbox" name="Spirituality_eligion_Patient_Y" value="面對疾病或死亡的焦慮與恐懼" />面對疾病或死亡的焦慮與恐懼</label></div>
                    <div class="DivItem_SL"><label><input type="checkbox" name="Spirituality_eligion_Patient_Y" value="對生命意義與價值的焦慮" />對生命意義與價值的焦慮</label></div>
                    <div class="DivItem_SL"><label><input type="checkbox" name="Spirituality_eligion_Patient_Y" value="對生命去向(死後)不確定" />對生命去向(死後)不確定</label></div>
                    <div class="DivItem_SL"><label><input type="checkbox" name="Spirituality_eligion_Patient_Y" value="放不下" />放不下</label></div>
                    <div class="DivItem_SL"><label><input type="checkbox" name="Spirituality_eligion_Patient_Y" value="罪惡感" />罪惡感</label></div>
                    <div class="DivItem_SL">
                        <label><input type="checkbox" name="Spirituality_eligion_Patient_Y" value="其他" onclick="SwitchSubProject(this);" />其他</label>
                        <span class="Spirituality_eligion_Patient_Y" style="display:none">
                            <input type="text" class="req_txt" data-Last="Y" name="Spirituality_eligion_Patient_Y_Other" disabled="disabled" />
                        </span>
                    </div>
                </div>
            </td>
        </tr>
        <tr class="SpiritualityAssess" style="display:none;">
            <td style="text-align:center;" class="AlertTitle">靈性宗教問題-家屬</td>
            <td>
                <label><input type="radio" class="req_ck" name="Spirituality_eligion_Family" value="有" data-Last="Y" data-target="Y" onclick="SwitchSubProject(this);" />有</label>
                <label><input type="radio" name="Spirituality_eligion_Family" value="無" onclick="SwitchSubProject(this);" />無</label>
                <label><input type="radio" name="Spirituality_eligion_Family" value="無法評估" onclick="SwitchSubProject(this);" />無法評估</label>
            </td>
            <td colspan="2">
                <div class="Spirituality_eligion_Family" style="display:none">
                    <div class="DivItem_SL"><label><input type="checkbox" class="req_ck" data-Last="Y" name="Spirituality_eligion_Family_Y" value="存在的孤獨隔絕感" />存在的孤獨隔絕感</label></div>
                    <div class="DivItem_SL"><label><input type="checkbox" name="Spirituality_eligion_Family_Y" value="面對疾病或死亡的焦慮與恐懼" />面對疾病或死亡的焦慮與恐懼</label></div>
                    <div class="DivItem_SL"><label><input type="checkbox" name="Spirituality_eligion_Family_Y" value="對生命意義與價值的焦慮" />對生命意義與價值的焦慮</label></div>
                    <div class="DivItem_SL"><label><input type="checkbox" name="Spirituality_eligion_Family_Y" value="對生命去向(死後)不確定" />對生命去向(死後)不確定</label></div>
                    <div class="DivItem_SL"><label><input type="checkbox" name="Spirituality_eligion_Family_Y" value="放不下" />放不下</label></div>
                    <div class="DivItem_SL"><label><input type="checkbox" name="Spirituality_eligion_Family_Y" value="罪惡感" />罪惡感</label></div>
                    <div class="DivItem_SL">
                        <label><input type="checkbox" name="Spirituality_eligion_Family_Y" value="其他" onclick="SwitchSubProject(this);" />其他</label>
                        <span class="Spirituality_eligion_Family_Y" style="display:none">
                            <input type="text" class="req_txt" data-Last="Y" name="Spirituality_eligion_Family_Y_Other" disabled="disabled" />
                        </span>
                    </div>
                </div>
            </td>
        </tr>
    </table>
</div>

<script type="text/javascript">
    $(document).ready(function () {
        $(window).resize(function () {
            var height = $(this).outerHeight();
            if (height <= 300)
                height = 450;
            $("#PainRecordContent").outerHeight(height - 60);
            $('#VTList .dataArea').outerHeight($('#VTList').outerHeight() - 60);
            $('#VTList').css({
                right: ($(document).outerWidth() - $('#VTList').outerWidth()) / 2,
                top: ($(document).outerHeight() - $('#VTList').outerHeight()) / 2
            })
        }).trigger("resize");
        //SetDateTime($('#ReocordDate'), $('#ReocordTime'));
        setGridColor();

    });

    function Back() {
        $('#PainRecord').empty().hide();
        $('#List').show();
    }

    function BindGCS(obj) {
        $('#PainRecordContent input[type=radio][name=GCS_E][value=' + $(obj).attr('data-E') + ']').prop('checked', true);
        $('#PainRecordContent input[type=radio][name=GCS_V][value=' + $(obj).attr('data-V') + ']').prop('checked', true);
        $('#PainRecordContent input[type=radio][name=GCS_M][value=' + $(obj).attr('data-M') + ']').prop('checked', true);
        CloseGCS();
    }

    function SwitchPainLevel(obj) {
        $('#PainRecordContent .' + $(obj).attr('name')).hide().find('*').prop('checked', false);
        $('#PainRecordContent .' + $(obj).attr('data-target')).show();
    }

    function SwitchSubProject(obj) {
        switch ($(obj).attr('type')) {
            case 'radio':
                SwitchSubProject_('#PainRecordContent .' + $(obj).attr('name'), $(obj).attr('data-target') == "Y");
                break;
            case 'checkbox':
                SwitchSubProject_('#PainRecordContent .' + $(obj).attr('name'), $(obj).prop('checked'));
                break;
        }
    }

    function SwitchSubProject_(obj_, bool) {
        if (bool) {
            $(obj_).show().find('*').prop('disabled', false);
            $(obj_).find('input[type=text]:first').focus();
        }
        else {
            $(obj_).hide().find("input[type=text]:not('.still')").val('').prop('disabled', true);
            $(obj_).find('select').prop('selectedIndex', 0).prop('disabled', true);
            $(obj_).find('input[type=radio], input[type=checkbox]').prop('checked', false).prop('disabled', true).filter('[onclick]').trigger('onclick');
        }
    }

    function ToSave() {
        if (Check()) {
            loop_windows("open_cover");
            var DataList = [];
            var DataObj;
            $.each($('#PainRecordContent .req_ck:visible:enabled'), function (i, item) {
                DataObj = new Object();
                DataObj["Name"] = $(item).attr('name');
                if ($(item).attr('type') == 'radio')
                    DataObj["Value"] = $('#PainRecordContent input[name=' + $(item).attr('name') + ']:checked').val();
                else
                    DataObj["Value"] = $('#PainRecordContent input[name=' + $(item).attr('name') + ']:checked').map(function () { return $(this).val(); }).get().join(',');
                DataList.push(DataObj);
            });
            $.each($('#PainRecordContent .req_txt:visible:enabled'), function (i, item) {
                DataObj = new Object();
                DataObj["Name"] = $(item).attr('name');
                DataObj["Value"] = $.trim($(item).val());
                DataList.push(DataObj);
            });
            $.each($('#PainRecordContent .req_lab:visible:enabled'), function (i, item) {
                DataObj = new Object();
                DataObj["Name"] = $(item).attr('name');
                DataObj["Value"] = $.trim($(item).text());
                DataList.push(DataObj);
            });
            $.each($('#PainRecordContent .req_ck:enabled[name=RelievePainMedItem]:checked'), function (i, item) {
                DataObj = new Object();
                DataObj["Name"] = $(item).attr('name');
                DataObj["Value"] = $.trim($(item).val());
                DataList.push(DataObj);
            });
            $.each($('#PainRecordContent .req_txt:enabled[name=PainMedItem]'), function (i, item) {
                DataObj = new Object();
                DataObj["Name"] = $(item).attr('name');
                DataObj["Value"] = $.trim($(item).val());
                DataList.push(DataObj);
            });
            DataObj = new Object();
            DataObj["Name"] = 'PainAbnormalItem';
            DataObj["Value"] = $('#PainRecordContent input[type=checkbox][name=PainAbnormalItem]:checked').map(function () { return $(this).val(); }).get().join(',');
            DataList.push(DataObj);
            $.ajax({
                type: 'POST',
                url: '@Url.Content("~/AssessPain_ECK/SavePainPositionRecord")',
                data: {
                    'PainCode': $('#PainRecordContent #PainCode').val(),
                    'PainRecordCode': $('#PainRecordContent #PainRecordCode').val(),
                    'RecordTime': $('#PainRecordContent #ReocordDate').val() + ' ' + $('#PainRecordContent #ReocordTime').val(),
                    'PainPosition': '@(ViewBag.PainPosition)',
                    'Data': JSON.stringify(DataList),
                },
                success: function (data) {
                    loop_windows("close_cover");
                    if (data == "Y") {
                        alert('儲存成功！');
                        location.reload();
                    }
                    else
                        alert('儲存失敗！');
                }
            });
        }
    }

    function Check() {
        var Success = true;
        $.each($('#PainRecordContent .req_ck:visible:enabled[name!=RelievePainMedItem]'), function (i, item) {
            if ($('#PainRecordContent input[name=' + $(item).attr('name') + ']:checked').length == 0) {
                alert('項目 ' + $(item).closest('tr').find('.AlertTitle').text() + ' 未填寫!!');
                $(item).focus();
                Success = false;
                return false;
            }
        });
        if (Success) {
            $.each($('#PainRecordContent .req_txt:visible:enabled[name!=Txt_RelievePainMedItem_other]'), function (i, item) {
                if ($.trim($(item).val()) == '') {
                    alert('項目 ' + $(item).closest('tr').find('.AlertTitle').text() + ' 未填寫!!');
                    $(item).focus();
                    Success = false;
                    return false;
                }
            });
        }

        if (Success) {
            if ($('#PainRecordContent input[type=checkbox][name=PainAbnormalItem]:checked').length == 0) {
                alert('項目 ' + $('#PainRecordContent input[type=checkbox][name=PainAbnormalItem]:checked').closest('tr').find('.AlertTitle').text() + ' 未填寫!!');
                $('#PainRecordContent input[type=checkbox][name=PainAbnormalItem]:visible:first').focus();
                Success = false;
            }
        }

        return Success;
    }

    function BindSpiritualityAssessData(DataList) {
        $.each(DataList, function (i, data) {
            Input = $('#PainRecordContent [name=' + data["Name"] + ']');
            if (Input.attr('data-Last') == "Y") {
                switch (Input.prop("tagName")) {
                    case 'INPUT':
                        switch (Input.attr("type").toUpperCase()) {
                            case 'TEXT':
                                Input.val(data["Value"]);
                                break;
                            case 'RADIO':
                                Input.filter("[value='" + data["Value"] + "']").prop('checked', true).trigger('onclick');
                                break;
                            case 'CHECKBOX':
                                $.each(data["Value"].split(","), function (i, item) {
                                    Input.filter("[value='" + item + "']").prop('checked', true).trigger('onclick');
                                });
                        }
                        break;
                    case 'SELECT':
                        Input.val(data["Value"]);
                        break;
                }
            }
        });
    }

    function MoodScore() {
        var score = 0;

        $.each($('#PainRecordContent input[type=radio][name=Mood_Thermometer_Q1]:checked'
            + ', #PainRecordContent input[type=radio][name=Mood_Thermometer_Q2]:checked'
            + ', #PainRecordContent input[type=radio][name=Mood_Thermometer_Q3]:checked'
            + ', #PainRecordContent input[type=radio][name=Mood_Thermometer_Q4]:checked'
            + ', #PainRecordContent input[type=radio][name=Mood_Thermometer_Q5]:checked'), function (i, item) {
                if ($(item).length > 0) {
                    score += parseInt($(item).val().substring(1, 2));
                }
            });
        var content = '';
        if (score >= 15)
            content = score + '分， (重度情緒困擾，建議諮詢精神科醫師接受進一步評估。)';
        else if (score <= 14 && score >= 10)
            content = score + '分， (中度情緒困擾，建議諮詢精神科醫師接受進一步評估。)';
        else if (score <= 9 && score >= 6)
            content = score + '分， (輕度情緒困擾，建議尋求紓壓管道或接受心理專業諮詢。)';
        else if (score <= 5)
            content = score + '分， (身心適應狀況良好。)';
        //$('#PainRecordContent input[type=text][name=Mood_Thermometer_Total]').val(content);
        $('#PainRecordContent label[name=Mood_Thermometer_Total]').text(content);

    }
    function openMed() {
        window.open("../CommonMedication/Medication_NurseExecutePain", "top_dialog", "menubar=no,status=no,scrollbars=yes,top=0,resizable=yes,left=200,toolbar=no,width=1024,height=768");
    }
    function insertMed(seq, desc, dose, way) {
        var medInfo = "";
        medInfo += "<input type='text'name='RelievePainMedItem_Name_" + seq +"' class='req_txt still medInfo' value='" + desc + "' style='width:60%;' readonly='readonly'/>"
        medInfo += "<input type='text' name='RelievePainMedItem_Amount_" + seq +"' class='req_txt medInfo 'value='" + dose + "' style='width:80px;' readonly='readonly'/>"
        medInfo += "<input type='text' name='RelievePainMedItem_Way_" + seq + "' class='req_txt medInfo 'value='" + way + "' readonly='readonly'/>"
        medInfo += "<input style='display:none' type='text' name='PainMedItem' class='req_txt medInfo'value='" + seq + "|" + desc + "|" + dose+"|"+ way + "' readonly='readonly'/>"

        $("#med").append(medInfo);
    }
</script>
